(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=(a(98),a(21)),s=a(11),i=a(13),u=a.n(i),m=a(25),p=a(17),d=a(79),f=a(8),E=function(e,t){switch(t.type){case"TRANSACTION_ERROR":return Object(f.a)(Object(f.a)({},e),{},{error:t.payload});case"GET_TRANSACTIONS":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,transactions:t.payload});case"DELETE_TRANSACTION":return Object(f.a)(Object(f.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case"ADD_TRANSACTION":return Object(f.a)(Object(f.a)({},e),{},{transactions:[].concat(Object(d.a)(e.transactions),[t.payload])});default:return e}},h=function(e,t){var a=t.type,n=t.payload;switch(a){case"LOGIN_SUCCESS":return localStorage.setItem("token",n),Object(f.a)(Object(f.a)({},e),{},{token:n,isAuthenticated:!0,loading:!1});case"LOGIN_FAILED":return localStorage.removeItem("token"),Object(f.a)(Object(f.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});case"USER_LOGOUT":return localStorage.removeItem("token"),Object(f.a)(Object(f.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null});case"USER_LOADED":return Object(f.a)(Object(f.a)({},e),{},{isAuthenticated:!0,loading:!1,user:n});case"AUTH_ERROR":return localStorage.removeItem("token"),Object(f.a)(Object(f.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});default:return e}},b=a(23),v=a.n(b),g=function(e){e?v.a.defaults.headers.common["x-auth-token"]=e:delete v.a.defaults.headers.common["x-auth-token"]},O={transactions:[],error:null,loadingTrans:!0},y={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},j=Object(n.createContext)(),x=function(e){var t=e.children,a=Object(n.useReducer)(E,O),c=Object(p.a)(a,2),o=c[0],l=c[1],s=Object(n.useReducer)(h,y),i=Object(p.a)(s,2),d=i[0],f=i[1],b={headers:{"Content-Type":"application/json"}},x=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&g(localStorage.token),e.prev=1,e.next=4,v.a.get("http://localhost:4000/api/user/auth");case 4:t=e.sent,f({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("http://localhost:4000/api/user/login",JSON.stringify(t),b);case 3:a=e.sent,f({type:"LOGIN_SUCCESS",payload:a.data.token}),x(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),(n=e.t0.response.data.errors)&&n.forEach((function(e){alert(e.msg)})),f({type:"LOGIN_FAILED"});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("http://localhost:4000/api/transactions",JSON.stringify(t),b);case 3:a=e.sent,l({type:"GET_TRANSACTIONS",payload:a.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.delete("http://localhost:4000/api/transactions/".concat(t));case 3:l({type:"DELETE_TRANSACTION",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("http://localhost:4000/api/transactions/add",JSON.stringify(t),b);case 3:a=e.sent,l({type:"ADD_TRANSACTION",payload:a.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(j.Provider,{value:{transactions:o.transactions,error:o.error,loadingtrans:o.loading,deleteTransaction:C,addTransaction:A,getTransactions:S,isAuthenticated:d.isAuthenticated,user:d.user,login:N,logout:function(){f({type:"USER_LOGOUT"})},loadUser:x}},t)},N=a(153),S=a(157),C=a(158),A=function(){var e=Object(n.useContext)(j).logout;return r.a.createElement("div",null,r.a.createElement(N.a,{position:"static",style:{background:"#181818"}},r.a.createElement(S.a,{className:"bar"},r.a.createElement(l.b,{to:"/addTrans",style:{textDecoration:"none"}},r.a.createElement(C.a,{style:{background:"transparent",color:"white"}},"Add Transaction")),r.a.createElement(l.b,{to:"/history",style:{textDecoration:"none"}},r.a.createElement(C.a,{style:{background:"#transparent",color:"white"}},"Transaction History")),r.a.createElement(l.b,{to:"/",style:{textDecoration:"none"}},r.a.createElement(C.a,{onClick:e,variant:"contained",color:"secondary",style:{color:"white"}},"Logout")))))};var T=function(){var e=Object(n.useContext)(j).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0);return r.a.createElement("div",null,r.a.createElement("h1",null,"Your balance"),r.a.createElement("h3",null,e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," NIS"))},k=a(159),w=a(171),R=a(160),I=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),l=Object(p.a)(o,2),s=l[0],i=l[1],u=Object(n.useContext)(j),m=u.transactions,d=u.addTransaction,f=u.user,E=m.map((function(e){return e.amount})).filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0);return r.a.createElement("div",{className:"addExpense"},r.a.createElement("h1",null,"Expense"),0===E?r.a.createElement("h3",null,"0"):r.a.createElement("h3",null,E),r.a.createElement("div",{className:"form"},r.a.createElement(k.a,{className:"form",color:"secondary"},r.a.createElement(w.a,{htmlFor:"expense-text-input"},"Add Expense"),r.a.createElement(R.a,{value:a,onChange:function(e){c(e.target.value)},autoComplete:"off",id:"expense-text-input"})),r.a.createElement(k.a,{className:"form",color:"secondary"},r.a.createElement(w.a,{htmlFor:"expense-amount-input"},"Amount"),r.a.createElement(R.a,{value:s,onChange:function(e){i(e.target.value)},autoComplete:"off",id:"expense-amount-input"})),r.a.createElement(C.a,{onClick:function(e){e.preventDefault();var t={text:a,amount:-s,userID:f._id};d(t),c(""),i(0)},variant:"contained",color:"secondary"},"Submit")))},D=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),l=Object(p.a)(o,2),s=l[0],i=l[1],u=Object(n.useContext)(j),m=u.transactions,d=u.addTransaction,f=u.user,E=m.map((function(e){return e.amount})).filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0);return r.a.createElement("div",{className:"addIncome"},r.a.createElement("h1",null,"Income"),r.a.createElement("h3",null,E),r.a.createElement("form",{className:"form"},r.a.createElement(k.a,{className:"form",color:"primary"},r.a.createElement(w.a,{htmlFor:"income-text-input"},"Add Income"),r.a.createElement(R.a,{value:a,onChange:function(e){c(e.target.value)},type:"text",autoComplete:"off",id:"income-text-input"})),r.a.createElement(k.a,{className:"form",color:"primary"},r.a.createElement(w.a,{htmlFor:"incomeAmount-input"},"Amount"),r.a.createElement(R.a,{type:"number",value:s,onChange:function(e){i(e.target.value)},id:"income-amount-input"})),r.a.createElement(C.a,{onClick:function(e){e.preventDefault();var t={text:a,amount:+s,userID:f._id};d(t),c(""),i(0)},variant:"contained",color:"primary"},"Submit")))},_=function(){var e=Object(n.useContext)(j),t=e.getTransactions,a=e.user;return Object(n.useEffect)((function(){if(a){var e={userID:a._id};t(e)}}),[a]),r.a.createElement("div",{className:"AddTrans"},a&&r.a.createElement("h1",null,"Welcome",r.a.createElement("span",null," "),a.name),r.a.createElement("div",{className:"transactions"},r.a.createElement(D,null),r.a.createElement(I,null)),r.a.createElement("div",{className:"balance"},r.a.createElement(T,null)))},L=a(161),U=a(164),W=a(162),F=a(163),G=a(76),q=a.n(G),J=function(e){var t=e.transaction,a=Object(n.useContext)(j).deleteTransaction,c=t.amount>0?"blue":"red";return r.a.createElement(L.a,null,r.a.createElement(W.a,{style:{maxWidth:300},id:t.id,primary:t.text}),r.a.createElement(W.a,{id:t.id,primary:t.amount+" NIS",style:{color:c}}),r.a.createElement(F.a,null,r.a.createElement(U.a,{onClick:function(){return a(t._id)},edge:"end","aria-label":"delete"},r.a.createElement(q.a,null))))},H=a(165),P=function(){var e=Object(n.useContext)(j).transactions;return r.a.createElement("div",{className:"transHistory"},r.a.createElement("div",{className:"transList"},r.a.createElement(H.a,{className:"list",style:{width:"100%",maxWidth:700}},e===[]?r.a.createElement("p",null,"You Have No Transactions"):e.map((function(e){return r.a.createElement(J,{key:e._id,transaction:e})})))))},B=a(34),V=a(170),Y=a(168),M=a(169),z=a(77),K=a.n(z),Q=a(53),X=a(166),Z=a(167),$=Object(X.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ee=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({name:"",email:"",password:"",passwordCheck:""}),i=Object(p.a)(o,2),d=i[0],E=i[1],h=function(e){E(Object(f.a)(Object(f.a)({},d),{},Object(B.a)({},e.target.name,e.target.value)))},b=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),j===x){e.next=5;break}alert("passwords does not match"),e.next=18;break;case 5:return a={name:O,email:y,password:j},e.prev=6,n={headers:{"Content-Type":"application/json"}},e.next=10,v.a.post("http://localhost:5000/api/user/register",JSON.stringify(a),n);case 10:alert("Register Success"),c(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),(r=e.t0.response.data.errors)&&r.forEach((function(e){alert(e.msg)}));case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),g=$(),O=d.name,y=d.email,j=d.password,x=d.passwordCheck;return a?r.a.createElement(s.a,{to:"/"}):r.a.createElement(Z.a,{component:"main",maxWidth:"xs"},r.a.createElement(Y.a,null),r.a.createElement("div",{className:g.paper},r.a.createElement(V.a,{className:g.avatar},r.a.createElement(K.a,null)),r.a.createElement(Q.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:g.form,noValidate:!0,onSubmit:b},r.a.createElement(M.a,{onChange:h,value:O,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"name",label:"Name",type:"name",id:"name",autoFocus:!0}),r.a.createElement(M.a,{onChange:h,value:y,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),r.a.createElement(M.a,{onChange:h,value:j,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(M.a,{onChange:h,value:x,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"passwordCheck",label:"Re-password",type:"password",id:"passwordCheck",autoComplete:"current-password"}),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:g.submit},"Register"),r.a.createElement(l.b,{to:"/",variant:"body2"},r.a.createElement(C.a,null," Already have an account? Sign In")))))},te=a(78),ae=a.n(te),ne=Object(X.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),re=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(j),i=o.login,d=o.isAuthenticated,E=function(e){c(Object(f.a)(Object(f.a)({},a),{},Object(B.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),i({email:v,password:g});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=ne(),v=a.email,g=a.password;return d?r.a.createElement(s.a,{to:"/addTrans"}):r.a.createElement(Z.a,{component:"main",maxWidth:"xs"},r.a.createElement(Y.a,null),r.a.createElement("div",{className:b.paper},r.a.createElement(V.a,{className:b.avatar},r.a.createElement(ae.a,null)),r.a.createElement(Q.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:b.form,noValidate:!0,onSubmit:h},r.a.createElement(M.a,{onChange:E,value:v,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(M.a,{onChange:function(e){return E(e)},value:g,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:b.submit},"Sign In"),r.a.createElement(l.b,{to:"/register",variant:"body2"},r.a.createElement(C.a,null," Don't have an account? Sign Up")))))},ce=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement("p",null,"Redirect to",r.a.createElement(l.b,{to:"/",style:{textDecoration:"none"}},r.a.createElement("span",{style:{color:"blueviolet",cursor:"pointer"}}," ","login"," ")),"page"))};localStorage.token&&g(localStorage.token);var oe=function(){var e=Object(n.useContext)(j),t=e.loadUser,a=e.isAuthenticated;return Object(n.useEffect)((function(){t()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement("div",null,a&&r.a.createElement(A,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:re}),r.a.createElement(s.b,{path:"/register",component:ee}),r.a.createElement(s.b,{path:"/addTrans",component:_}),r.a.createElement(s.b,{path:"/history",component:P}),r.a.createElement(s.b,{path:"/*",component:ce})))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null,r.a.createElement(oe,null))),document.getElementById("root"))},93:function(e,t,a){e.exports=a(123)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.4bdf2a8e.chunk.js.map